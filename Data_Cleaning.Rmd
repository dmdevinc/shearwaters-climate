---
title: "Data Cleaning â€“ Shearwaters Climate Project"
author: "Danielle D."
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_depth: 2
    theme: flatly
description: >
  This notebook details the data cleaning workflow for the Shearwaters Climate project,
  including preprocessing steps, variable transformations, and reproducibility notes.
---

# Data Cleaning

## Overview

This document walks through the full data cleaning process for the Shearwaters Climate project. 

## eBird Data

This data included records of sooty shearwater and pink-footed shearwater sightings in the Monterey and Bodega Bay areas (Monterey county and Sonoma county). The sighting data includes the date, time, count, and occasionally other breeding data or comments.

Put in the read me:
Bird observation data sourced from the eBird Basic Dataset (Cornell Lab of Ornithology). Used under the Creative Commons Attribution-NonCommercial license.

eBird Basic Dataset. Version: [year]. Cornell Lab of Ornithology, Ithaca, New York. https://ebird.org/data/download.

```{r}
# eBird Data

# Data was pulled from Monterey, Santa Cruz, and Bodega counties for the dates January 1st, 2015 - November 30th, 2025.
  # Bird codes:
  # sooty shearwater (SOSH)
  # pink-footed shearwater (PFSH)

library(readr)

# ----- pfsh.monterey

pfsh.monterey <- read_delim(
  "/Users/danielledevincenzi/Desktop/Learning R/eBird data/ebd_US-CA-053_pifshe_201501_202511_smp_relOct-2025/ebd_US-CA-053_pifshe_201501_202511_smp_relOct-2025.txt",
  delim = "\t",
  show_col_types = FALSE
)

library(janitor)

pfsh.monterey <- pfsh.monterey %>%
  janitor::clean_names()

# ----- sosh.monterey

sosh.monterey <- read_delim(
  "/Users/danielledevincenzi/Desktop/Learning R/eBird data/ebd_US-CA-053_sooshe_201501_202511_smp_relNov-2025/ebd_US-CA-053_sooshe_201501_202511_smp_relNov-2025_sampling.txt",
  delim = "\t",
  show_col_types = FALSE
)

sosh.monterey <- sosh.monterey %>%
  janitor::clean_names()

# ----- pfsh.sonoma

pfsh.sonoma <- read_delim(
  "/Users/danielledevincenzi/Desktop/Learning R/eBird data/ebd_US-CA-097_pifshe_smp_relNov-2025/ebd_US-CA-097_pifshe_smp_relNov-2025.txt",
  delim = "\t",
  show_col_types = FALSE
)

pfsh.sonoma <- pfsh.sonoma %>%
  janitor::clean_names()

# ----- sosh.sonoma

sosh.sonoma <- read_delim(
  "/Users/danielledevincenzi/Desktop/Learning R/eBird data/ebd_US-CA-097_sooshe_201501_202511_smp_relNov-2025/ebd_US-CA-097_sooshe_201501_202511_smp_relNov-2025_sampling.txt",
  delim = "\t",
  show_col_types = FALSE
)

sosh.sonoma <- sosh.sonoma %>%
  janitor::clean_names()

# ----- combine eBird data

bird.master <- rbind(pfsh.monterey, sosh.monterey, pfsh.sonoma, sosh.sonoma)

# ---------

# to do next...
# should I remove any entries? Check data and clean for analysis, also remove unneeded columns

```

```{r}
# # ----- check date ranges
# 
# library(dplyr)
# library(lubridate)  # for easier date handling
# 
# # Make sure date column is in Date or POSIXct format
# pfsh.monterey$last_edited_date <- as.Date(pfsh.monterey$last_edited_date)
# pfsh.santa.cruz$last_edited_date <- as.Date(pfsh.santa.cruz$last_edited_date)
# sosh.santa.cruz$last_edited_date <- as.Date(sosh.santa.cruz$last_edited_date)
# 
# # Date ranges
# date_range1 <- range(pfsh.monterey$last_edited_date, na.rm = TRUE)
# date_range1
# date_range2 <- range(pfsh.santa.cruz$last_edited_date, na.rm = TRUE)
# date_range2
# date_range3 <- range(sosh.santa.cruz$last_edited_date, na.rm = TRUE)
# date_range3
# 
# # selected date range: January 1st, 2015 - November 30th, 2025
```

## NOAA Data

This data includes temperature, wind, sea surface temperature (sst), upwelling index, and enso index for Monterey and Bodega Bays.

Data sourced from NOAA [dataset name], accessed on [date]. NOAA data are in the public domain.

```{r}
# weekly average? daily - too noisy
# identify anomalies
```
