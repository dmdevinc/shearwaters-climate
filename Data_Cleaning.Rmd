---
title: "Data Cleaning â€“ Shearwaters Climate Project"
author: "Danielle D."
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_depth: 2
    theme: flatly
description: >
  This notebook details the data cleaning workflow for the Shearwaters Climate project,
  including preprocessing steps, variable transformations, and reproducibility notes.
---

# Data Cleaning

## Overview

This document walks through the full data cleaning process for the Shearwater project. 

## NOAA Data

This data includes...
  - Sea surface temperature (sst) : ties to marine heatwaves, upwelling strength, and forage fish distribtuion
  - Wind: strong northwest wings indicate cold, productive waters
  - Upwelling Index (Bakun Index): productivity
  - ENSO indices: large scale climate patterns that affect local productivity

for Monterey and Bodega Bays.

Data sourced from NOAA [dataset name], accessed on [date]. NOAA data are in the public domain.

```{r}
# weekly average? daily - too noisy
# identify anomalies
```

## eBird Data

This data included records of sooty shearwater and pink-footed shearwater sightings in the Monterey and Bodega Bay areas. The sighting data includes the date, time, count, and occasionally other breeding data or comments.

Put in the read me:
Bird observation data sourced from the eBird Basic Dataset (Cornell Lab of Ornithology). Used under the Creative Commons Attribution-NonCommercial license.

eBird Basic Dataset. Version: [year]. Cornell Lab of Ornithology, Ithaca, New York. https://ebird.org/data/download.

```{r}
library(readr)

ebird_data <- read_delim(
  "eBird data/ebd_US-CA-053_pifshe_201501_202511_smp_relOct-2025/ebd_US-CA-053_pifshe_201501_202511_smp_relOct-2025.txt",
  delim = "\t",
  show_col_types = FALSE
)

library(janitor)

ebird_data <- ebird_data %>%
  janitor::clean_names()

ebird_data

library(dplyr)
library(lubridate)  # for easier date handling

# Make sure date column is in Date or POSIXct format
ebird_data$last_edited_date <- as.Date(ebird_data$last_edited_date)

# 1. Unique bird species
unique_species <- unique(ebird_data$common_name)
length(unique_species)   # How many species in total
head(unique_species, 20) # See first 20 species

# 2. Date range
date_range <- range(ebird_data$last_edited_date, na.rm = TRUE)
date_range

# --------------

ebird_data2 <- read_delim(
  "eBird data/ebd_US-CA-087_pifshe_201501_202511_smp_relOct-2025/ebd_US-CA-087_pifshe_201501_202511_smp_relOct-2025_sampling.txt",
  delim = "\t",
  show_col_types = FALSE
)

ebird_data2 <- ebird_data2 %>%
  janitor::clean_names()

ebird_data2

# Make sure date column is in Date or POSIXct format
ebird_data2$last_edited_date <- as.Date(ebird_data2$last_edited_date)

# 1. Unique bird species
unique_species <- unique(ebird_data2$common_name)
length(unique_species)   # How many species in total
head(unique_species, 20) # See first 20 species

# 2. Date range
date_range <- range(ebird_data2$last_edited_date, na.rm = TRUE)
date_range

# --------------

ebird_data3 <- read_delim(
  "eBird data/ebd_US-CA-087_pifshe_201501_202511_smp_relOct-2025/ebd_US-CA-087_pifshe_201501_202511_smp_relOct-2025_sampling.txt",
  delim = "\t",
  show_col_types = FALSE
)

ebird_data3 <- ebird_data2 %>%
  janitor::clean_names()

ebird_data3

# Make sure date column is in Date or POSIXct format
ebird_data3$last_edited_date <- as.Date(ebird_data3$last_edited_date)

# 1. Unique bird species
unique_species <- unique(ebird_data3$common_name)
length(unique_species)   # How many species in total
head(unique_species, 20) # See first 20 species

# 2. Date range
date_range <- range(ebird_data3$last_edited_date, na.rm = TRUE)
date_range

# to do next...
# figure out what data I have here (county, dates, species) - what do I still need to request?
# combine all eBird data, get rid of columns you don't need

# PFSH and SOSH data for Santa Cruz and Monterey counties, Bodega bay county too
```

